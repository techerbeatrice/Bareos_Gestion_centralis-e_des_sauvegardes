# Bareos : gestion centralis√©e des sauvegardes   

___

üî¨ Installation, configuration et test de bareos

L'installation d'un serveur bareos
Pour cette mise en pratique, utlises un unique serveur GNU/Linux (qui peut √©videmment √™tre une VM) sur lequel tu dois donc installer postgresql (pour le catalogue) ainsi que l'ensemble des composants bareos qui s'installe par le m√©ta-paquet bareos.

L'installation sur le m√™me serveur de Bareos Webui

Proc√®de ensuite √† toute la partie tutorial qui t'am√®ne √†

Lancer et d√©couvrir la console.
Lancer un premier job et faire ta premi√®re sauvegarde.
Faire une restauration des donn√©es sauvegard√©es.
Ajouter un client. Ce client est une deuxi√®me machine (ou VM) sur laquelle tu installes uniquement bareos-fd.
Configurer le serveur et le client pour que la communication soit possible.
Lancer une sauvegarde sur le client.

___

**Installation du serveur bareos sur une vm debian**  

__

Passer en root pour ajouter un utilisateur pour effectuer les prochaines commandes avec _sudo adduser foo sudo_   

![image](https://github.com/techerbeatrice/Bareos_Gestion_centralisee_des_sauvegardes/assets/138071140/f8ed7e25-f489-468d-aeec-0a5d81e338f7)

____

Apr√®s avoir mis √† niveau Ubuntu, vous devrez **ajouter le r√©f√©rentiel Bareos et le fichier cl√© √† votre ordinateur**. Les packages les plus r√©cents seront mis √† disposition sur votre machine d√®s que son r√©f√©rentiel sera ajout√©.   

Ex√©cutez les instructions ci-dessous pour ajouter le r√©f√©rentiel avec les packages et la cl√© les plus r√©cents :   

_sudo sh -c 'echo "deb http://download.bareos.org/bareos/release/latest//xUbuntu_22.04.1 /" >> /etc/apt/sources.list.d/bareos.list'_

![image](https://github.com/techerbeatrice/Bareos_Gestion_centralisee_des_sauvegardes/assets/138071140/9a82dbc2-825e-4bc5-b075-586b9b5f4af2)

____

Apr√®s avoir ajout√© le r√©f√©rentiel, ex√©cutez les instructions suivantes pour **importer la cl√© GPG du r√©f√©rentiel** :   

_sudo wget -q http://download.bareos.org/bareos/release/latest/xUbuntu_22.04.1/Release.key -O- | sudo apt-key add -_  

![image](https://github.com/techerbeatrice/Bareos_Gestion_centralisee_des_sauvegardes/assets/138071140/ec25c298-b700-4c08-9630-cec878917d55)

S'affiche le message : _apt-key est obsol√®te_ et _G√©rer les fichiers de trousseaux de cl√©s dans trust.gpg.d_  

Ici Ubuntu veut que vous s√©pariez les cl√©s GPG   
C'est un message d‚Äôavertissement ; ¬´ G√©rer les fichiers de trousseaux de cl√©s dans trust.gpg.d ¬ª et depuis 2020, ajouter une cl√© GPG pour les d√©p√¥ts utilis√©s par apt ne doit plus se faire par le biais de la commande _apt-key_ ; celle-ci est d√©clar√© obsol√®te ET ne doit plus √™tre utilis√©e ! 

Ubuntu ne veut pas que vous ajoutiez toutes les cl√©s de signature dans le fichier unique /etc/apt/trusted.gpg. Il sugg√®re d'utiliser un fichier s√©par√© situ√© dans le r√©pertoire /etc/apt/trusted.gpg.d.   

donc nouvelle commande √† taper : _sudo wget -q http://download.bareos.org/bareos/release/latest/xUbuntu_22.04.1/Release.key -O- | sudo apt-key add - | gpg --dearmor | sudo tee /etc/apt/trusted.gpg.d/bareos.gpg_  


____

sudo apt-get install bareos   
sudo apt-get install --yes bareos.com-director bareos.com-storage bareos.com-filedaemon bareos.com-database-postgresql bareos.com-bconsole   


